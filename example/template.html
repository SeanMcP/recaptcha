<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>reCAPTCHA Example</title>
</head>

<body>
  <script src="https://www.google.com/recaptcha/api.js?render={{.SiteKey}}"></script>
  <script>
    // Get Token click handler just gets a new token and displays it
    function onGetToken() {
      grecaptcha.ready(function() {
          grecaptcha.execute("{{.SiteKey}}", {action: "{{.Action}}"}).then(function(token) {
          document.getElementById("token-div").innerHTML = token;
        });
      });
    };

    // Submit click handler gets a new token and submits it via a form
    function onSubmit() {
      grecaptcha.ready(function() {
          grecaptcha.execute("{{.SiteKey}}", {action: "{{.Action}}"}).then(function(token) {
          document.getElementById("token-input").value = token;
          document.getElementById("form").submit();
        });
      });
    };
  </script>

  <form id="form" action="/submit" method="POST">
  <fieldset>
    <legend>Example Form</legend>
    <input type="hidden" id="token-input" name="token">
    <button type="button" onclick="onGetToken()">Get Token</button>
    <button type="button" onclick="onSubmit()">Submit</button>
  </fieldset>
</form>
<div id="token-div"></div>
</body>
</html>
